# 栈

栈這個词實际上在计算机科学里使用很多，除了數據結構外，還有内存里的栈區 （和堆對應），熟悉 C 系语言的话應该不會陌生。
上一章我們講到了先进先出 queue，其實用 python 的内置类型 collections.deque 或者我們自己實現的 LinkedList 來實現它都很簡單。
本章我們講講 後进先出的栈。

生活中的數據結構：

- 栈。好比在桶里头放盘子，先放的盘子放在了底下，後來的盘子放在上邊。你要拿的时候，也是先拿最上邊的。

栈其實也很簡單，因為基础操作就俩，一個 push 和一個 pop，咦，咋和陣列一样的？
确實方法名字一样，但是得到的結果可是不同的。


# 栈 ADT

上一章我介绍了我們怎样选取恰到的數據結構來實現新的 ADT？你能想到這裡我們應该使用之前提到的哪個數據結構來實現嗎？
你的大脑可能開始高(gui)速(su)旋转了，上幾章学過的 array, list, deque, LinkedList, CircularDoubleLinkedList, queue
等在大脑里呼啸而過，這個时候可能已經一臉愁容了，到底该选啥？

還用問嘛，當然是時間複雜度最小的啦，大部分情况下空間都是够用的。
其實你會發现栈比陣列還簡單，因為它只在頂上操作（想像装着盘子的桶），如果有一種數據結構能方便在尾部增减元素不就满足需求了嗎。
這個时候如果你忘記了，可以翻翻前幾章，看看哪個數據結構符合要求。

想一下，似乎 CircularDoubleLinkedList 循環双端陣列是满足的，因為增删最後一個元素都是 O(1)。
不過看了下示例代碼，似乎没有 pop() 方法，對，因為我已經把實現 deque 作為思考题了。😂
如果之前你没寫出來也没關係，這裡我們會再實現它。


影片里我們將借助 CircularDoubleLinkedList 實現 双端陣列 Deque ，並且用 Deque 實現 Stack。


# Stack over flow 什麼鬼？
嗯，stackoverflow 不是一個程序员問答網站嗎？没錯。
函数的临时变量是儲存在栈區的，如果你不幸寫了一個没有出口的遞迴函数，就會這個錯。不信你試試：


```py
def infinite_fib(n):
    return infinite_fib(n-1) + infinite_fib(n-2)
infinite_fib(10)
```

一大段输出之後就會出现异常： RecursionError: maximum recursion depth exceeded。
後邊會講到遞迴，遞迴是初学者比较難理解的概念，在树的遍历等地方還會看到它。


# 數據結構头脑風暴法

當我們不知道使用什麼數據結構來解决問题的时候，《程序员面試金典》這本书的第六章提到了一種方式叫做『數據結構头脑風暴法』。
這種笨方法就是快速過一遍數據結構的列表，然後逐一嘗試各種數據結構看看哪個最適合。

在你實現一個更高级的數據結構的时候，如果脑子没有思路，不妨嘗試下這個方法，迅速過一遍你所知道的數據結構，看看哪種最適合。(从每個操作的時間複雜度和空間複雜度分析寻找最優解)

# 思考题
- 上一章我們用数组實現了陣列，其實也能用数组來實現栈，你能自己用数组來實現一個栈的 ADT 嗎？
- 實际上借助 python 内置的 list/collections.deque 結構就很容易實現一個栈，請你嘗試實現，本章我們全部使用自己编寫的數據結構而没用到 python 内置的數據結構。
- 這裡我們自己實現了 Deque，你能用 python 内置的 collections.deque 實現栈嗎？有轮子能直接用的话看起來就簡單多了，這裡我們為了学习數據結構的實現就避免了直接使用内置結構
- 哪些經典算法里使用到了栈呢？

# Leetcode 练习

https://leetcode.com/problems/implement-queue-using-stacks/
