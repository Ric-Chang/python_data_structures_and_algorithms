# 集合 set

集合是一種不包含重复元素的數據結構，經常用來判断是否重复這種操作，或者集合中是否存在一個元素。
這一章講集合，實際上它的底层也是哈希表實現的，所以像實現 DictADT 一樣，借助 HashTable 實現它也比较簡單。


# 集合操作
集合可能最常用的就是去重，判断是否存在一個元素等，但是 set 相比 dict 有更丰富的操作，主要是數學概念上的。
如果你學過《离散數學》中集合相關的概念，基本上是一致的。 python 的 set 提供了如下基本的集合操作，
假设有兩個集合 A，B，有以下操作：

- 交集: A & B，表示同時在 A 和 B 中的元素。 python 中重载  `__and__` 實現
- 並集: A | B，表示在 A 或者 B 中的元素，兩個集合相加。python 中重载 `__or__` 實現
- 差集:  A - B，表示在 A 中但是不在 B 中的元素。 python 中重载 `__sub__` 實現
- 對称差: A ^ B，返回在 A 或 B 但是不在 A、B 中都出現的元素。其實就是 (A|B) - (A&B)， python 中重载 `__xor__` 實現

這裡使用的  &, |, -, ^ 在 python 内置的 set 實現中都是重载了内置的運算符。這裡我們也用這種方式實現，
具體實現我會在影片裡演示。python 同樣實現了  intersection, union, difference, symmetric_difference 這四個方法，
和使用運算符的功能是一樣的。

![](./set.png)

# python frozenset
在 python 裡還有一個 frozenset，看它的名字就知道這種也是集合，但是它的内容是無法變動的。一般我們使用
它的常見就是用一個可迭代對象初始化它，然後只用來判重等操作。


# 實現一個 set ADT
如何實現一個集合的 ADT 呢，其實還是個哈希表，哈希表不是有 key 和 value 嘛，咱把 value 置為 1 不就行了。

```py
class SetADT(HashTable):

    def add(self, key):
        # 集合其實就是一個 dict，只不過我們把它的 value 设置成 1
        return super(SetADT, self).add(key, True)
```

當然其它數學上的操作就麻烦點了，不過也很容易實現。


# 思考题
- 集合判断一個元素是否存在的時間複雜度是多少？
- 集合的元素 key 需要满足什麼概念？可变對象可以嗎？
- 請你在 SetADT 基础上實現集合的 remove 操作和 pop 操作
- 你能嘗試實現對称差操作嗎？這裡我没有實現，留给你作為練習
- 你知道如何重载 python 的内置運算符嗎？這裡我們實現 set 的集合操作就是用到了重载，請閱讀相關 python 文档。
- 當元素個數不多的時候，我們可以用 set 來判重，但是如果是大量元素會非常耗费記憶體。請你了解下 Bloom Filter


# 延伸閱讀
閱讀 python 文档關於 set 的相關章節，了解 set 還有哪些操作？比如比较運算符的概念，比较兩個集合意味着什麼。
